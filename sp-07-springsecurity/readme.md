
## Springboot 集成Spring Security实现登录安全、权限验证

---
* SpringSecurity 核心功能：

    - 认证（你是谁）
    - 授权（你能干什么）
    - 攻击防护（防止伪造身份）
    
* 通用的用户权限模型。
一般情况下会有5张表，分别是：用户表，角色表，权限表，用户角色关系表，角色权限对应表。

* 一般，资源分配时是基于角色的（即，资源访问权限赋给角色，用户通过角色进而拥有权限）；而访问资源的时候是基于资源权限去进行授权判断的。




### 1、引入Spring Security依赖


### 2、启动运行 

- 浏览器访问http://127.0.0.1:8081/user，浏览器被自动重定向到了登录的界面：
- 这是Spring Security自带的 and 默认的

### 3、编写Spring Security配置类

- 根据登录、角色身份、认证规则的需求去编写配置类

- 授权的时候是对角色授权，而认证的时候应该基于资源，而不是角色，因为资源是不变的，而用户的角色是会变的

- 配置：
    - 那些http请求是公开的
    - 那些http请求是要登录授权才能访问的
    - 那些需要具备什么角色身份才能访问的
    - 登录成功、登录失败时转发、或者重定向处理、或者返回Json
    - 退出转发、或者重定向处理、或者返回Json

### 4、权限分配

业务场景1 （角色：角色表，资源：菜单）RBAC

- 部门 （可选）

- 用户 

- 角色：vip1、vip2、vip3

- 资源列表（菜单）

- role_menu 分配权限是（把角色ID 与 资源ID 关联起来）关系表

- user_role 用户角色关系表

业务场景2 （角色：角色表，资源：菜单）
